
jQuery(document).ready(function(D){D("body").addClass("wpdiscuz_313");wpdiscuzValidator.message.invalid=wpdiscuz_ajax_obj.wpdiscuz_options.wc_invalid_field;wpdiscuzValidator.message.empty=wpdiscuz_ajax_obj.wpdiscuz_options.wc_error_empty_text;wpdiscuzValidator.message.email=wpdiscuz_ajax_obj.wpdiscuz_options.wc_error_email_text;wpdiscuzValidator.message.url=wpdiscuz_ajax_obj.wpdiscuz_options.wc_error_url_text;wpdiscuzValidator.message.min=wpdiscuz_ajax_obj.wpdiscuz_options.wc_msg_comment_text_min_length;wpdiscuzValidator.message.max=wpdiscuz_ajax_obj.wpdiscuz_options.wc_msg_comment_text_max_length;var Q=wpdiscuz_ajax_obj.wpdiscuz_options.is_user_logged_in;var q=wpdiscuz_ajax_obj.wpdiscuz_options.wc_captcha_show_hide==0&&!Q;var P=wpdiscuz_ajax_obj.wpdiscuz_options.wc_captcha_show_hide_for_members>0&&Q;var B=wpdiscuz_ajax_obj.wpdiscuz_options.commentListLoadType;var U=wpdiscuz_ajax_obj.wpdiscuz_options.wordpressIsPaginate;var n=wpdiscuz_ajax_obj.wpdiscuz_options.wc_post_id;var j=wpdiscuz_ajax_obj.wpdiscuz_options.commentListUpdateType;var i=wpdiscuz_ajax_obj.wpdiscuz_options.commentListUpdateTimer;var x=wpdiscuz_ajax_obj.wpdiscuz_options.liveUpdateGuests;var R=wpdiscuz_ajax_obj.wpdiscuz_options.loadLastCommentId;var a=wpdiscuz_ajax_obj.wpdiscuz_options.wordpress_comment_order;var H=wpdiscuz_ajax_obj.wpdiscuz_options.commentsVoteOrder;var z=wpdiscuz_ajax_obj.wpdiscuz_options.storeCommenterData;var b=1;var l="comment_date_gmt";var L=[];var u=[];E();g();f();if(H){D(".wpdiscuz-vote-sort-up").addClass("wpdiscuz-sort-button-active");l="by_vote"}else{D(".wpdiscuz-date-sort-"+a).addClass("wpdiscuz-sort-button-active")}D("#wc_unsubscribe_message").delay(7000).fadeOut(1500,function(){D(this).remove();location.href=location.href.substring(0,location.href.indexOf("subscribeAnchor")-1)});if(D(".wc_main_comm_form").length){e()}D(document).delegate(".wc-reply-link","click",function(){if(D(this).hasClass("wpdiscuz-clonned")){D("#wc-secondary-form-wrapper-"+m(D(this),0)).slideToggle(700)}else{h(D(this))}e()});D(document).delegate("textarea.wc_comment","focus",function(){if(!(D(this).next(".autogrow-textarea-mirror").length)){D(this).autoGrow()}var X=D(this).parents(".wc-form-wrapper");D(".wc-form-footer",X).slideDown(700)});D(document).delegate(".wc-share-link","click",function(){var X=D(this).parents(".wc-comment-right");D(".share_buttons_box",X).slideToggle(1000)});D(document).delegate(".wpdiscuz-nofollow,.wc_captcha_refresh_img,.wc-toggle,.wc-load-more-link","click",function(X){X.preventDefault()});D(document).delegate(".wc-toggle","click",function(){var Y=m(D(this),0);var X=D(this);D("#wc-comm-"+Y+"> .wc-reply").slideToggle(700,function(){if(D(this).is(":hidden")){X.html(wpdiscuz_ajax_obj.wpdiscuz_options.wc_show_replies_text+" &or;")}else{X.html(wpdiscuz_ajax_obj.wpdiscuz_options.wc_hide_replies_text+" &and;")}})});D(document).delegate(".wc-new-loaded-comment","mouseenter",function(){if(D(this).hasClass("wc-reply")){D(">.wc-comment-right",this).animate({backgroundColor:wpdiscuz_ajax_obj.wpdiscuz_options.wc_reply_bg_color},1500)}else{D(">.wc-comment-right",this).animate({backgroundColor:wpdiscuz_ajax_obj.wpdiscuz_options.wc_comment_bg_color},1500)}});D(document).delegate(".wc_captcha_refresh_img","click",function(){O(D(this))});function O(ab){if(q||P){var Z=ab.parents(".wc-form-wrapper");var X=Z.hasClass("wc-secondary-form-wrapper")?0:1;var ac=m(ab,X);var aa="uniqueId="+ac;var Y=d("generateCaptcha",aa);Y.done(function(ae){try{var ai=D.parseJSON(ae);if(ai.code==1){var ag=D(ab).prev().children(".wc_captcha_img");var ak=ag.attr("src");var ad=ak.lastIndexOf("/")+1;var af=ak.substring(0,ad)+ai.message;ag.attr("src",af);var aj=D(".wpdiscuz-cnonce",Z);aj.attr("id",ai.key);aj.attr("value",ai.key)}}catch(ah){console.log(ah)}D(".wpdiscuz-loading-bar").hide()})}}D(document).delegate(".wc_comm_submit","click",function(){var ab=1;var Y=D(this).parents("form");if(!Y.hasClass("wc_main_comm_form")){ab=C(D(this).parents(".wc-comment"))}if(!wpdiscuz_ajax_obj.wpdiscuz_options.is_email_field_required&&D(".wc_email",Y).val()){D(".wc_email",Y).attr("required","required")}if(!wpdiscuz_ajax_obj.wpdiscuz_options.is_email_field_required&&!(D(".wc_email",Y).val())){D(".wc_email",Y).removeAttr("required");D(".wc_email",Y).next(".alert").html("")}if(wpdiscuzValidator.checkAll(Y)){var X=Y.serialize()+"&wc_comment_depth="+ab;if(q||P){var Z=D(".wc_captcha_img",Y);var aa=Z.attr("src");var ad=aa.lastIndexOf("/")+1;var ac=aa.substring(ad);X+="&fileName="+ac}if(wpdiscuz_ajax_obj.wpdiscuz_options.wpdiscuz_zs){X+="&wpdiscuz_zs="+wpdiscuz_ajax_obj.wpdiscuz_options.wpdiscuz_zs}d("addComment",X).done(function(af){var ag="";var ah="";try{var aj=D.parseJSON(af);ag=aj.code;if(parseInt(ag)>=0){var ae=aj.is_main;ah=aj.message;D(".wc_header_text_count").html(aj.wc_all_comments_count_new);if(ae){D(".wc-thread-wrapper").prepend(ah)}else{D("#wc-secondary-form-wrapper-"+ag).slideToggle(700);if(aj.is_in_same_container==1){D("#wc-secondary-form-wrapper-"+ag).after(ah)}else{D("#wc-secondary-form-wrapper-"+ag).after(ah.replace("wc-reply","wc-reply wc-no-left-margin"))}}o(aj);T(aj);t(Y,aj);Y.get(0).reset();e();f();D(".wc_comment",Y).css("height","45.6px")}else{ah=wpdiscuz_ajax_obj.wpdiscuz_options[ag];s(Y,ag,ah,true)}}catch(ai){if(af.indexOf("<")>=0&&af.indexOf(">")>=0){ah=ai}else{ah=af}s(Y,"wc_invalid_field",ah,true)}E();D(".wpdiscuz-loading-bar").hide()})}O(D(".wc_captcha_refresh_img",Y))});function o(Z){if(!Z.held_moderate){var Y="comment_id="+Z.new_comment_id+"&email="+Z.user_email+"&isParent="+Z.is_main;var X=d("checkNotificationType",Y);X.done(function(aa){try{Z=D.parseJSON(aa)}catch(ab){console.log(ab)}})}}function T(Z){if(Z.redirect>0&&Z.new_comment_id){var Y="commentId="+Z.new_comment_id;var X=d("redirect",Y);X.done(function(aa){Z=D.parseJSON(aa);if(Z.code==1){setTimeout(function(){window.location.href=Z.redirect_to},5000)}})}}function e(){if(D.cookie("wc_author_name")){D(".wc_comm_form .wc_name").val(D.cookie("wc_author_name"))}if(D.cookie("wc_author_email")){D(".wc_comm_form .wc_email").val(D.cookie("wc_author_email"))}if(D.cookie("wc_author_website")){D(".wc_comm_form .wc_website").val(D.cookie("wc_author_website"))}}function t(Z,aa){var Y="";var X="";if(D(".wc_email",Z).val()){Y=D(".wc_email",Z).val()}else{Y=aa.user_email}if(D(".wc_name",Z).val()){X=D(".wc_name",Z).val()}else{X=aa.user_name}console.log(z);if(z==null){D.cookie("wc_author_email",Y);D.cookie("wc_author_name",X);D.cookie("wc_author_website",D(".wc_website",Z).val())}else{z=parseInt(z);D.cookie("wc_author_email",Y,{expires:z,path:"/"});D.cookie("wc_author_name",X,{expires:z,path:"/"});D.cookie("wc_author_website",D(".wc_website",Z).val(),{expires:z,path:"/"})}}var S;D(document).delegate(".wc_editable_comment","click",function(){var aa=m(D(this),0);var X=V(aa);var Z=D(this);var Y="commentId="+X;S=D("#wc-comm-"+aa+" .wc-comment-text").html();d("editComment",Y).done(function(ac){try{var ag=D.parseJSON(ac);var ae="";var ad=ag.code;if(parseInt(ad)>=0){var ab='<textarea required="required" name="wc_comment" class="wc_comment wc_field_input wc_edit_comment" id="wc_edit_comment-'+aa+'" style="min-height: 2em;">'+ag.message+"</textarea>";D("#wc-comm-"+aa+" > .wc-comment-right .wc-comment-text").replaceWith(ab);document.getElementById("wc_edit_comment-"+aa).focus();D("#wc-comm-"+aa+" > .wc-comment-right .wc-comment-footer .wc_save_edited_comment").show();ab="";D("#wc-comm-"+aa+" > .wc-comment-right .wc-comment-footer .wc_editable_comment").hide();D("#wc-comm-"+aa+" > .wc-comment-right .wc-comment-footer .wc_cancel_edit").show()}else{ae=wpdiscuz_ajax_obj.wpdiscuz_options[ad];s(Z,ad,ae,false)}}catch(af){console.log(af)}D(".wpdiscuz-loading-bar").hide()})});D(document).delegate(".wc_save_edited_comment","click",function(){var ac=m(D(this));var Y=V(ac);var X=D("#wc-comm-"+ac+" textarea#wc_edit_comment-"+ac);var Z=X.val();var ab=D(this);if(D.trim(Z).length>0){var aa="commentId="+Y+"&commentContent="+Z;d("saveEditedComment",aa).done(function(ad){try{var ah=D.parseJSON(ad);var ae=ah.code;var af="";if(parseInt(ae)>=0){I(ac,ah.message)}else{af=wpdiscuz_ajax_obj.wpdiscuz_options[ae];s(ab,ae,af,false)}X="";Z=""}catch(ag){console.log(ag)}D(".wpdiscuz-loading-bar").hide()})}});D(document).delegate(".wc_cancel_edit","click",function(){var X=m(D(this));I(X,S)});function I(Z,Y){D("#wc-comm-"+Z+" > .wc-comment-right .wc-comment-footer .wc_editable_comment").show();D("#wc-comm-"+Z+" > .wc-comment-right .wc-comment-footer .wc_cancel_edit").hide();D("#wc-comm-"+Z+" > .wc-comment-right .wc-comment-footer .wc_save_edited_comment").hide();var X='<div class="wc-comment-text">'+k(Y)+"</div>";D("#wc-comm-"+Z+" #wc_edit_comment-"+Z).replaceWith(X)}function k(aa,Z){var Y=(Z||typeof Z==="undefined")?"<br/>":"<br>";var X=(aa+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+Y+"$2");return X.replace("<br><br>","<br/>")}D(document).delegate(".wc-load-more-submit","click",function(){G()});var p=D("#wpdiscuzHasMoreComments").val();var F=false;if(B==2&&!U){D(".wc-load-more-submit").parents(".wpdiscuz-comment-pagination").hide();D(window).scroll(function(){var X=document.getElementById("wcThreadWrapper").scrollHeight;if(D(window).scrollTop()>=X&&F===false&&p==1){F=true;G()}})}function G(){var X;X="offset="+b+"&orderBy="+l+"&order="+a+"&lastParentId="+v();b++;d("loadMoreComments",X).done(function(Y){try{var aa=D.parseJSON(Y);D(".wpdiscuz-comment-pagination").before(aa.comment_list);r(aa);D(".wpdiscuz_single").remove();F=false;f()}catch(Z){console.log(Z)}E();D(".wpdiscuz-loading-bar").hide();D(".wc-load-more-submit").blur()})}function r(Y){var X=0;if(Y.is_show_load_more==false){X=0;p=0;D(".wc-load-more-submit").parents(".wpdiscuz-comment-pagination").hide()}else{N(Y.last_parent_id);p=1;X=1}D("#wpdiscuzHasMoreComments").val(X)}D(document).delegate(".wc_vote","click",function(){var X=D(this);var aa="";var ab="";var Y=D(this).parents(".wc-comment-right").attr("id");Y=Y.substring(Y.lastIndexOf("-")+1);var Z;if(D(this).hasClass("wc-up")){Z=1}else{Z=-1}var ac="commentId="+Y+"&voteType="+Z;d("voteOnComment",ac).done(function(ad){try{var af=D.parseJSON(ad);aa=af.code;if(parseInt(aa)>=0){var ag=D(".wc-comment-footer .wc-vote-result",D("#comment-"+Y));D(ag).text(parseInt(D(ag).text())+Z)}else{ab=wpdiscuz_ajax_obj.wpdiscuz_options[aa];s(X,aa,ab,false)}}catch(ae){console.log(ae)}D(".wpdiscuz-loading-bar").hide()})});D(document).delegate(".wpdiscuz-sort-button","click",function(){p=D("#wpdiscuzHasMoreComments").val();if(!(D(this).hasClass("wpdiscuz-sort-button-active"))){var aa=D(this);if(D(this).hasClass("wpdiscuz-vote-sort-up")){l="by_vote";a="desc"}else{l="comment_date_gmt";a=D(this).hasClass("wpdiscuz-date-sort-desc")?"desc":"asc"}var Z="orderBy="+l+"&order="+a;var X="";var Y="";d("wpdiscuzSorting",Z).done(function(ab){try{var ad=D.parseJSON(ab);X=ad.code;Y=ad.message;if(parseInt(X)>0){D("#wpcomm .wc-thread-wrapper .wc-comment").each(function(){D(this).remove()});D("#wpcomm .wc-thread-wrapper").prepend(Y);b=parseInt(ad.loadCount)}else{}K(aa);r(ad)}catch(ac){console.log(ac)}f();E();D(".wpdiscuz-loading-bar").hide()})}});function K(X){D(".wpdiscuz-sort-buttons .wpdiscuz-sort-button").each(function(){D(this).removeClass("wpdiscuz-sort-button-active")});X.addClass("wpdiscuz-sort-button-active")}function W(){var ab=location.href;var aa=ab.match(/#comment\-(\d+)/);if(aa!==null){var Y=aa[1];if(!D("#comment-"+Y).length){var Z="commentId="+Y;var X=d("getSingleComment",Z);X.done(function(ac){try{var ae=D.parseJSON(ac);D(".wc-thread-wrapper").prepend(ae.message);D("html, body").animate({scrollTop:D(".wc-thread-wrapper").offset().top},1000)}catch(ad){console.log(ad)}E();D(".wpdiscuz-loading-bar").hide()})}}}W();if(j>0&&R&&(Q||(!Q&&!x))){setInterval(M,parseInt(i)*1000)}function M(){var aa=A();var Y=(D.cookie("wc_author_email")!=undefined&&D.cookie("wc_author_email")!="")?D.cookie("wc_author_email"):"";var Z="loadLastCommentId="+R+"&visibleCommentIds="+aa+"&email="+Y;var X=d("liveUpdate",Z);X.done(function(ac){try{var ah=D.parseJSON(ac);if(ah.code==1){if(j==1){y(ah)}else{u=u.concat(ah.message.comments);L=L.concat(ah.message.author_replies);var ad=u.length;var ab=L.length;if(ad>0){var af=ad+" ";af+=ad>1?wpdiscuz_ajax_obj.wpdiscuz_options.wc_new_comments_button_text:wpdiscuz_ajax_obj.wpdiscuz_options.wc_new_comment_button_text;D(".wc_new_comment").html(af).show()}else{D(".wc_new_comment").hide()}if(ab>0){var ae=ab+" ";ae+=ab>1?wpdiscuz_ajax_obj.wpdiscuz_options.wc_new_replies_button_text:wpdiscuz_ajax_obj.wpdiscuz_options.wc_new_reply_button_text;D(".wc_new_reply").html(ae).show()}else{D(".wc_new_reply").hide()}}D(".wc_header_text_count").html(ah.wc_all_comments_count_new);R=ah.loadLastCommentId}}catch(ag){console.log(ag)}E();D(".wpdiscuz-loading-bar").hide()})}function y(aa){if(aa.message!==undefined){var X;var Z=aa.message;for(var Y=0;Y<Z.length;Y++){X=Z[Y];w(X.comment_parent,X.comment_html)}f()}}D(document).delegate(".wc-update-on-click","click",function(){var X;var Y=D(this);if(Y.hasClass("wc_new_comment")){X="newCommentIds="+u.join()}else{X="newCommentIds="+L.join()}d("updateOnClick",X).done(function(Z){try{var ab=D.parseJSON(Z);y(ab);if(Y.hasClass("wc_new_comment")){u=[];D(".wc_new_comment").hide()}else{L=[];D(".wc_new_reply").hide()}}catch(aa){console.log(aa)}E();D(".wpdiscuz-loading-bar").hide()})});D(document).delegate(".wpdiscuz-readmore","click",function(){var Z=m(D(this));var X=V(Z);var Y="commentId="+X;d("readMore",Y).done(function(aa){try{var ac=D.parseJSON(aa);if(ac.code){D("#comment-"+X+" > .wc-comment-text").html(" "+ac.message);D("#wpdiscuz-readmore-"+Z).remove()}}catch(ab){console.log(ab)}D(".wpdiscuz-loading-bar").hide()})});function s(ab,Y,aa,Z){var X;var ac;if(Z){ac=ab.parents(".wc-form-wrapper")}else{ac=ab.closest(".wc-comment")}X=ac.children(".wpdiscuz-comment-message");X.addClass(Y);X.html(aa);X.show().delay(4000).fadeOut(1000,function(){X.removeClass();X.addClass("wpdiscuz-comment-message");X.html("")})}function h(Y){var Z=m(Y,0);D("#wpdiscuz_form_anchor-"+Z).before(J(Z));var X=D("#wc-secondary-form-wrapper-"+Z);X.slideToggle(700,function(){Y.addClass("wpdiscuz-clonned")});O(D(".wc_captcha_refresh_img",X))}function J(Y){var X=D("#wpdiscuz_hidden_secondary_form").html();return X.replace(/wpdiscuzuniqueid/g,Y)}function m(Z,Y){var X="";if(Y){X=Z.parents(".wc-main-form-wrapper").attr("id")}else{X=Z.parents(".wc-comment").attr("id")}var aa=X.substring(X.lastIndexOf("-")+1);return aa}function V(X){return X.substring(0,X.indexOf("_"))}function v(){var X=D(".wc-load-more-link").attr("href");return X.substring(X.lastIndexOf("=")+1)}function N(X){var Y=D(".wc-load-more-link").attr("href");D(".wc-load-more-link").attr("href",Y.replace(/[\d]+$/m,X));if(B!=2){D(".wpdiscuz-comment-pagination").show()}}function C(Z){var Y=Z.attr("class");var X=Y.split(" ");var aa="";D.each(X,function(ab,ac){if("wc_comment_level"===c(ac,false)){aa=c(ac,true)}});return parseInt(aa)+1}function c(X,Y){var Z="";if(Y){Z=X.substring(X.indexOf("-")+1)}else{Z=X.substring(0,X.indexOf("-"))}return Z}function w(Z,Y){if(Z==0){D(".wc-thread-wrapper").prepend(Y)}else{var X=m(D("#comment-"+Z),0);D("#wpdiscuz_form_anchor-"+X).after(Y)}}function A(){var Z;var X;var Y="";D(".wc-comment-right").each(function(){Z=m(D(this),0);X=V(Z);Y+=X+","});return Y}function E(){D(".wc-comment-img-link").tooltipster({trigger:"click",contentAsHTML:true,interactive:true,multiple:true});D(".wc_tooltipster").tooltipster({offsetY:2,multiple:true})}function g(){if(D(".wc_social_plugin_wrapper .wp-social-login-provider-list").length){D(".wc_social_plugin_wrapper .wp-social-login-provider-list").clone().prependTo("#wpdiscuz_hidden_secondary_form > .wc-form-wrapper >  .wc-secondary-forms-social-content")}else{if(D(".wc_social_plugin_wrapper .the_champ_login_container").length){D(".wc_social_plugin_wrapper .the_champ_login_container").clone().prependTo("#wpdiscuz_hidden_secondary_form > .wc-form-wrapper >  .wc-secondary-forms-social-content")}else{if(D(".wc_social_plugin_wrapper .social_connect_form").length){D(".wc_social_plugin_wrapper .social_connect_form").clone().prependTo("#wpdiscuz_hidden_secondary_form > .wc-form-wrapper >  .wc-secondary-forms-social-content")}else{if(D(".wc_social_plugin_wrapper .oneall_social_login_providers").length){D(".wc_social_plugin_wrapper .oneall_social_login .oneall_social_login_providers").clone().prependTo("#wpdiscuz_hidden_secondary_form > .wc-form-wrapper >  .wc-secondary-forms-social-content")}}}}}function f(){D("#wcThreadWrapper .wc-comment").each(function(X){if(D("> .wc-reply",this).length){D("> .wc-comment-right .wc-comment-footer .wc-toggle",this).removeClass("wpdiscuz-hidden")}})}function d(Y,X){if(Y!=="liveUpdate"){D(".wpdiscuz-loading-bar").show()}X+="&postId="+n;return D.ajax({type:"POST",url:wpdiscuz_ajax_obj.url,data:{wpdiscuzAjaxData:X,action:Y}})}});